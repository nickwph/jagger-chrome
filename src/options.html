<html>
<link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600' rel='stylesheet' type='text/css'>

<style type="text/less">

body {
	background-color:#F2F5F6;
	width:960px;
	font-family: 'Open Sans', sans-serif;
	font-size:12px;
	padding:10px;
}	

#header {
	padding:10px;
	
	#title {
		font-weight:600;
		font-size:14px;
	}
}

#content {
	width:100%;
		
	.row {
		border-style: solid;
		border-width: 1px;
		border-color: #D9D9D9;
		background-color: white;
		overflow:hidden;
		margin-bottom:10px;
		-webkit-border-radius: 4px;
		
		div {
			position:relative;
		}
		
		.description, .url, .script {
			padding:4px;
			width:790px;
			float:left;
			border-bottom: solid 1px #D9D9D9;
			border-right: solid 1px #D9D9D9;
			
			&.script {
				border-bottom:none;
			}
			
			label {
				top:8px;
				left:4px;
				color: #777;
				position: absolute;
				white-space: nowrap;
				cursor: text;
				text-shadow: 0 1px 0 rgba(255, 255, 255, 0.5);
				-webkit-transition: opacity .4s, font-size .5s;
				-moz-transition: opacity .4s, font-size .5s;
				-o-transition: opacity .4s, font-size .5s;
				
				&.hasome {
					opacity: 0;
					font-size: 0!important;
				}
			}
			
			input[type="text"] {
				border: 0;
				font-family: 'Open Sans', sans-serif;
				font-size:12px;
				width:100%;
			}
			
			textarea {
				border: 0;
				font-family: 'Ubuntu Mono', sans-serif;
				font-size:12px;
				width:100%;
				height:60px;
			}
		}
		.action {
			width:159px;
			float:right;
			
			
			div {
				padding:4px;			
				overflow:hidden;
				height:23px;
				border-bottom: solid 1px #D9D9D9;
				
				input[type="checkbox"] {
					float:right;
					margin:8px;
				}
				
				&:last-child {
					border-bottom: none;
				}
				
				&.save, &.delete {
					height:23px;
					text-align:center;
					background-image: -webkit-gradient(linear,left bottom,left top,color-stop(0,#E0EFD3),color-stop(1,#EFF8E6));
					font-size:16px;
					font-weight: 600;
					text-shadow: #EDF6E5 1px 1px 0;
					
					&:hover {
						background-image: -webkit-gradient(linear,left bottom,left top,color-stop(1,#E0EFD3),color-stop(0,#EFF8E6));
					}
				}
			}
		}
		
	}
}

</style>
	
<head>
	<title>Javascript</title>
	<script type="text/javascript" src="less/less-1.1.3.min.js"></script>
	<script type="text/javascript" src="jquery/jquery-1.6.1.min.js"></script>
</head>

<body>

	<div id="header">
		<div id="title">Javascript Injector</div>
	</div>

	<div id="content">
		<div class="row sample">
			<div class="action">
		
				<div class="save">
					<label>Save</label>
				</div>
				<div class="delete">
					<label>Delete</label>
				</div>
				<div class="autorun">
					<label>Autorun</label>
					<input type="checkbox" checked />
				</div>
				<div class="jquery">
					<label>jQuery</label>
					<input type="checkbox" checked />
				</div>
			</div>
				<div class="description">
					<label class="hasome">Title</label>
					<input type="text" value="Nicholas Workshop Debug"/>
				</div>
				<div class="url">
					<label class="hasome">Url</label>
					<input type="text" value="http://www.nicholasworkshop.com"/>
				</div>
				<div class="script">
					<label class="hasome">Script</label>
					<textarea>alert('Script Injected!');</textarea>
				</div>
		</div>
	</div>
	
	<div id="action">
		<div id="delete-selected">
			<label>Delete Selected</label>
		</div>
	</div>

</body>

<script>
	var background = chrome.extension.getBackgroundPage();
	
	function create(tag) { return $(document.createElement(tag)) }
	
	background.database.getAllScripts(function(rows) {
        for (var i=0; i < rows.length; i++) {
			var element = $("div.row.sample").clone().removeClass("sample");
			var data = rows.item(i);
			element.find(".url input").val(data.url).parent().find("label").addClass(data.url!=""?"hasome":"").removeClass(data.url==""?"hasome":"");
			element.find(".description input").val(data.description).parent().find("label").addClass(data.description!=""?"hasome":"").removeClass(data.description==""?"hasome":"");
			element.find(".script textarea").val(data.script).parent().find("label").addClass(data.script!=""?"hasome":"").removeClass(data.script==""?"hasome":"");
			element.find(".autorun input").attr('checked', data.autorun=="true"?true:false);
			element.find(".jquery input").attr('checked', data.jquery=="true"?true:false);
			$("#content").append(element);
		}
    });
</script>

</html>